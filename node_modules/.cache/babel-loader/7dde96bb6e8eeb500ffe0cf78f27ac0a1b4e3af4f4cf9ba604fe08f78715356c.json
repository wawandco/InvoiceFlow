{"ast":null,"code":"var _jsxFileName = \"/Users/manuelperez/Projects/React/InvoiceFlow/src/components/ManageSubscription.js\",\n  _s = $RefreshSig$();\nimport Stripe from \"stripe\";\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ManageSubscription({\n  isSubscribed,\n  customerId\n}) {\n  _s();\n  const STRIPE_SK_KEY = \"sk_test_51P6CocDuGS5xH1gVNC6ZqSv0ILh9XhRbtnJXyOTOEHUE48YpEKVKnzVPSr4kC8Xeuy22AZDaVphPRmnTslPTqRaD00izS7Lccg\";\n  const [customerSubscriptions, setCustomerSubscriptions] = useState({});\n  const handleManageSubscription = async () => {\n    const stripe = Stripe(STRIPE_SK_KEY);\n    const session = await stripe.billingPortal.sessions.create({\n      customer: customerId,\n      return_url: `${window.location.origin}/profile`\n    });\n    window.location.href = session.url;\n  };\n  const getSubscriptionInfo = async () => {\n    const stripe = Stripe(STRIPE_SK_KEY);\n    const subscriptions = await stripe.subscriptions.list({\n      customer: customerId,\n      status: \"active\"\n    });\n    if (subscriptions.data.length > 0) {\n      const product = await stripe.products.retrieve(subscriptions.data[0].plan.product);\n      if (Object.keys(customerSubscriptions).length === 0) {\n        setCustomerSubscriptions({\n          subscriptionId: subscriptions.data[0].id,\n          productName: product.name,\n          amount: subscriptions.data[0].plan.amount / 100\n        });\n      }\n    }\n  };\n  getSubscriptionInfo();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isSubscribed && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col justify-center max-w-lg m-4 p-6 shadow-md rounded-xl sm:px-12 dark:bg-gray-50 dark:text-gray-800\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold sm:text-2xl\",\n          children: customerSubscriptions.productName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"px-5 text-4xl\",\n          children: [\"$ \", customerSubscriptions.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-2 space-y-1\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleManageSubscription,\n            className: \"text-white bg-[#3D52A0] text-lg rounded-lg px-5 py-2.5\",\n            children: \"Manage Subscription\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n}\n_s(ManageSubscription, \"ZQUt9jkvVM2eY62Wamg8rZ9m/D0=\");\n_c = ManageSubscription;\n;\nvar _c;\n$RefreshReg$(_c, \"ManageSubscription\");","map":{"version":3,"names":["Stripe","React","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","ManageSubscription","isSubscribed","customerId","_s","STRIPE_SK_KEY","customerSubscriptions","setCustomerSubscriptions","handleManageSubscription","stripe","session","billingPortal","sessions","create","customer","return_url","window","location","origin","href","url","getSubscriptionInfo","subscriptions","list","status","data","length","product","products","retrieve","plan","Object","keys","subscriptionId","id","productName","name","amount","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/manuelperez/Projects/React/InvoiceFlow/src/components/ManageSubscription.js"],"sourcesContent":["import Stripe from \"stripe\";\nimport React, { useState } from 'react';\n\nexport default function ManageSubscription({ isSubscribed, customerId }) {\n    const STRIPE_SK_KEY = \"sk_test_51P6CocDuGS5xH1gVNC6ZqSv0ILh9XhRbtnJXyOTOEHUE48YpEKVKnzVPSr4kC8Xeuy22AZDaVphPRmnTslPTqRaD00izS7Lccg\"\n    const [customerSubscriptions, setCustomerSubscriptions] = useState({})\n\n    const handleManageSubscription = async () => {\n        const stripe = Stripe(STRIPE_SK_KEY);\n\n        const session = await stripe.billingPortal.sessions.create({\n            customer: customerId,\n            return_url: `${window.location.origin}/profile`,\n        });\n        window.location.href = session.url\n    }\n\n    const getSubscriptionInfo = async () => {\n        const stripe = Stripe(STRIPE_SK_KEY);\n\n        const subscriptions = await stripe.subscriptions.list({\n            customer: customerId,\n            status: \"active\",\n        })\n\n        if (subscriptions.data.length > 0) {\n            const product = await stripe.products.retrieve(subscriptions.data[0].plan.product)\n\n            if (Object.keys(customerSubscriptions).length === 0) {\n                setCustomerSubscriptions({\n                    subscriptionId: subscriptions.data[0].id,\n                    productName: product.name,\n                    amount: subscriptions.data[0].plan.amount / 100,\n                })\n            }\n        }\n\n    }\n    getSubscriptionInfo();\n\n    return (\n        <>\n            {isSubscribed &&\n                <div className=\"flex flex-col justify-center max-w-lg m-4 p-6 shadow-md rounded-xl sm:px-12 dark:bg-gray-50 dark:text-gray-800\">\n                    <div className=\"space-y-4 text-center\">\n                        <h2 className=\"text-xl font-semibold sm:text-2xl\">{customerSubscriptions.productName}</h2>\n                        <p className=\"px-5 text-4xl\">$ {customerSubscriptions.amount}</p>\n                        <div className=\"my-2 space-y-1\">\n                            <button onClick={handleManageSubscription} className=\"text-white bg-[#3D52A0] text-lg rounded-lg px-5 py-2.5\">\n                                Manage Subscription\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            }\n        </>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}