{"ast":null,"code":"var _jsxFileName = \"/Users/manuelperez/Projects/React/InvoiceFlow/src/components/PricingTable.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport Stripe from \"stripe\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PricingTable({\n  customerId\n}) {\n  _s();\n  const STRIPE_SK_KEY = \"sk_test_51P6CocDuGS5xH1gVNC6ZqSv0ILh9XhRbtnJXyOTOEHUE48YpEKVKnzVPSr4kC8Xeuy22AZDaVphPRmnTslPTqRaD00izS7Lccg\";\n  const STRIPE_PK_KEY = \"pk_test_51P6CocDuGS5xH1gVlXTr0Zyg5yqu5X2bWoH4aTRXGU1VeCTZ078UuFx0eQgYQDlRi7vgR8PE0n6m4AIdvmZjelX200jAwyHr7L\";\n  const [products, setProducts] = useState([]);\n  // const [cusSession, setCusSession] = useState({})\n\n  // const createCustomerSession = async () => {\n  //     const stripe = Stripe(STRIPE_SK_KEY);\n\n  //     const customerSession = await stripe.customerSessions.create({\n  //         customer: customerId,\n  //         components: {\n  //             pricing_table: {\n  //                 enabled: true,\n  //             },\n  //         },\n  //     });\n\n  //     if (Object.keys(cusSession).length === 0) {\n  //         setCusSession(customerSession)\n  //     }\n  // }\n  // createCustomerSession();\n\n  const handleCheckout = async (customerId, priceId) => {\n    const stripeSk = Stripe(STRIPE_SK_KEY);\n    const stripePk = await loadStripe(STRIPE_PK_KEY);\n    const session = await stripeSk.checkout.sessions.create({\n      customer: customerId,\n      payment_method_types: ['card'],\n      line_items: [{\n        price: priceId,\n        quantity: 1\n      }],\n      mode: 'subscription',\n      success_url: `${window.location.origin}/successful-payment`,\n      cancel_url: `${window.location.origin}/billing`\n    });\n    const {\n      error\n    } = await stripePk.redirectToCheckout({\n      sessionId: session.id\n    });\n    if (error) {\n      console.warn(\"Error: \", error);\n    }\n  };\n  const getPrices = async () => {\n    const stripe = Stripe(STRIPE_SK_KEY);\n    const prices = await stripe.prices.list();\n    var p = [];\n    for (const price of prices.data) {\n      if (price.active) {\n        const product = await stripe.products.retrieve(price.product);\n        p.push({\n          id: product.id,\n          name: product.name,\n          description: product.metadata.description,\n          priceId: price.id,\n          amount: price.unit_amount / 100,\n          interval: price.recurring.interval\n        });\n      }\n    }\n    if (products.length === 0) {\n      setProducts(p);\n    }\n  };\n  getPrices();\n  // products.forEach(async (product) => { console.log(\"Product: \", product)});\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-auto max-w-screen-md text-center mb-8 lg:mb-12\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-4 text-4xl tracking-tight font-extrabold text-gray-900\",\n          children: \"Choose your Plan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8 lg:grid lg:grid-cols-3 sm:gap-6 xl:gap-10 lg:space-y-0\",\n        children: products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col p-6 mx-auto text-center rounded-lg border border-gray-100 shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-4 text-2xl font-semibold\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-light text-gray-500 sm:text-lg\",\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center items-baseline my-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mr-2 text-5xl font-extrabold\",\n              children: [\"$ \", product.amount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 dark:text-gray-400\",\n              children: \"/month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              handleCheckout(customerId, product.priceId);\n            },\n            className: \"text-white bg-[#3D52A0] text-lg rounded-lg px-5 py-2.5\",\n            children: \"Subscribe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(PricingTable, \"/ZAmBmUKriWz3XDcp0xu079Wyow=\");\n_c = PricingTable;\n;\nvar _c;\n$RefreshReg$(_c, \"PricingTable\");","map":{"version":3,"names":["React","useState","loadStripe","Stripe","jsxDEV","_jsxDEV","Fragment","_Fragment","PricingTable","customerId","_s","STRIPE_SK_KEY","STRIPE_PK_KEY","products","setProducts","handleCheckout","priceId","stripeSk","stripePk","session","checkout","sessions","create","customer","payment_method_types","line_items","price","quantity","mode","success_url","window","location","origin","cancel_url","error","redirectToCheckout","sessionId","id","console","warn","getPrices","stripe","prices","list","p","data","active","product","retrieve","push","name","description","metadata","amount","unit_amount","interval","recurring","length","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","_c","$RefreshReg$"],"sources":["/Users/manuelperez/Projects/React/InvoiceFlow/src/components/PricingTable.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport Stripe from \"stripe\";\n\nexport default function PricingTable({ customerId }) {\n    const STRIPE_SK_KEY = \"sk_test_51P6CocDuGS5xH1gVNC6ZqSv0ILh9XhRbtnJXyOTOEHUE48YpEKVKnzVPSr4kC8Xeuy22AZDaVphPRmnTslPTqRaD00izS7Lccg\"\n    const STRIPE_PK_KEY = \"pk_test_51P6CocDuGS5xH1gVlXTr0Zyg5yqu5X2bWoH4aTRXGU1VeCTZ078UuFx0eQgYQDlRi7vgR8PE0n6m4AIdvmZjelX200jAwyHr7L\"\n    const [products, setProducts] = useState([])\n    // const [cusSession, setCusSession] = useState({})\n\n    // const createCustomerSession = async () => {\n    //     const stripe = Stripe(STRIPE_SK_KEY);\n\n    //     const customerSession = await stripe.customerSessions.create({\n    //         customer: customerId,\n    //         components: {\n    //             pricing_table: {\n    //                 enabled: true,\n    //             },\n    //         },\n    //     });\n\n    //     if (Object.keys(cusSession).length === 0) {\n    //         setCusSession(customerSession)\n    //     }\n    // }\n    // createCustomerSession();\n\n    const handleCheckout = async (customerId, priceId) => {\n        const stripeSk = Stripe(STRIPE_SK_KEY);\n        const stripePk = await loadStripe(STRIPE_PK_KEY);\n\n        const session = await stripeSk.checkout.sessions.create({\n            customer: customerId,\n            payment_method_types: ['card'],\n            line_items: [\n                { price: priceId, quantity: 1 },\n            ],\n            mode: 'subscription',\n            success_url: `${window.location.origin}/successful-payment`,\n            cancel_url: `${window.location.origin}/billing`,\n        });\n\n        const { error } = await stripePk.redirectToCheckout({ sessionId: session.id })\n        if (error) {\n            console.warn(\"Error: \", error);\n        }\n    }\n\n    const getPrices = async () => {\n        const stripe = Stripe(STRIPE_SK_KEY);\n        const prices = await stripe.prices.list();\n\n        var p = []\n\n        for (const price of prices.data) {\n            if (price.active) {\n                const product = await stripe.products.retrieve(price.product)\n\n                p.push({\n                    id: product.id,\n                    name: product.name,\n                    description: product.metadata.description,\n                    priceId: price.id,\n                    amount: price.unit_amount / 100,\n                    interval: price.recurring.interval,\n                })\n            }\n        }\n\n        if (products.length === 0) {\n            setProducts(p)\n        }\n    }\n    getPrices();\n    // products.forEach(async (product) => { console.log(\"Product: \", product)});\n\n    return (\n        <>\n            {/* <stripe-pricing-table\n                pricing-table-id=\"prctbl_1P9SxSDuGS5xH1gVv3yCn5NA\"\n                publishable-key=\"pk_test_51P6CocDuGS5xH1gVlXTr0Zyg5yqu5X2bWoH4aTRXGU1VeCTZ078UuFx0eQgYQDlRi7vgR8PE0n6m4AIdvmZjelX200jAwyHr7L\"\n                customer-session-client-secret={cusSession.client_secret}\n            >\n            </stripe-pricing-table> */}\n\n            <section className=\"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6\">\n                <div className=\"mx-auto max-w-screen-md text-center mb-8 lg:mb-12\">\n                    <h2 className=\"mb-4 text-4xl tracking-tight font-extrabold text-gray-900\">Choose your Plan</h2>\n                </div>\n                <div className=\"space-y-8 lg:grid lg:grid-cols-3 sm:gap-6 xl:gap-10 lg:space-y-0\">\n                    {products.map(product => (\n                        <div key={product.id} className=\"flex flex-col p-6 mx-auto text-center rounded-lg border border-gray-100 shadow\">\n                            <h3 className=\"mb-4 text-2xl font-semibold\">{product.name}</h3>\n                            <p className=\"font-light text-gray-500 sm:text-lg\">{product.description}</p>\n                            <div className=\"flex justify-center items-baseline my-8\">\n                                <span className=\"mr-2 text-5xl font-extrabold\">$ {product.amount}</span>\n                                <span className=\"text-gray-500 dark:text-gray-400\">/month</span>\n                            </div>\n                            <button onClick={() => { handleCheckout(customerId, product.priceId) }} className=\"text-white bg-[#3D52A0] text-lg rounded-lg px-5 py-2.5\">Subscribe</button>\n                        </div>\n                    ))}\n                </div>\n            </section>\n        </>\n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}